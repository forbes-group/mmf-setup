# Much of tis configuration comes from
# https://octobus.net/blog/2020-11-26-modern-mercurial.html
[ui]
tweakdefaults = true
# Merge conflict markers in files (they look like "<<<<<<<") are more verbose
mergemarkers = detailed
# Uses the internal non-interactive simple merge algorithm for merging
# files. It will fail if there are any conflicts and leave markers in the
# partially merged file. Marker will have three sections, one from each
# side of the merge and one for the base content.
merge = :merge3

ccommit.verbose = true

[commands]
# Require the user to pass a revision (or revset) to "push" instead of pushing
# all heads by default.
push.require-revs = true

[paths]
# Default to the current revision (`.`) when pushing to `default`. 
default:pushrev = .

[extensions]
# ==== "Core" extensions ====
# Extensions that come pre-packaged with Mercurial:

color=
graphlog=
histedit=
rebase=
record=
shelve=
strip=

# Automatically finds where to amend the different bits of your working
# directory into the right changesets and does so interactively.
absorb =

mmf_setup.nbclean=$MMF_SETUP/nbclean.py

[hooks]
# This hook adds "%include ../.hgrc" to .hg/hgrc if the .hgrc file exists in
# the top level.  This allows one to store a set of paths for example.
# See http://stackoverflow.com/a/24195392/1088938
update = if [ -e .hgrc ] && touch .hg/hgrc \
                         && ! grep -q '%include \.\./\.hgrc' .hg/hgrc; then \
           echo '%include ../.hgrc' >> .hg/hgrc; \
         fi

[alias]
lga = glog --style=${MMF_SETUP}/_data/hgthemes/map-cmdline.lg -l20

cediff  = !hg nbclean && { hg ediff  "$@"; hg nbrestore; }
